---

#
# Main parameters
#

atom_environment_type: "production"
atom_user: "www-data"
atom_group: "www-data"
atom_path: "/usr/share/nginx/atom"
atom_repository_url: "https://github.com/artefactual/atom.git"
atom_repository_version: "stable/2.4.x"
atom_install_site: "true"
atom_install_dependencies: "true"
# Install some extra packages specific to our official Vagrant-based
# development box. See `tasks/devbox.yml` for more details.
atom_devbox: "no"

#
# Worker
#

atom_worker_setup: "yes"
atom_worker_service_name: "atom-worker"
# use old config (atom 2.0.x) for atom worker (atom-worker.conf, app.yml)
# for binder set to "yes"
atom_worker_old_config: "no"

#
# Misc
#

# Populate search index
atom_populate_index: "no"

# Flush database
atom_flush_data: "no"

# Build static assets
atom_build_static_assets: "yes"

# Themes (to build)
atom_themes:
  - path: "{{ atom_path }}/plugins/arDominionPlugin"
    build_cmd: "make"
  - path: "{{ atom_path }}/plugins/arArchivesCanadaPlugin"
    build_cmd: "make"

# Plug-ins
atom_plugins:
  - "qtSwordPlugin"

atom_gdpr_enabled: "False"

# Default user for tools:purge
atom_user_email: "demo@example.com"
atom_user_username: "demo"
atom_user_password: "demo"
atom_title: "AtoM"
atom_description: "Access to Memory"

# Create extra superusers
# atom_extra_superusers:
#  - username: foobar
#    password: foobar
#    email: foo@bar.com

# Update database settings
# atom_db_settings:
#  - k: hits_per_page
#    v: 10

#
# config.php
#

atom_template_config_php: "atom/config/config.php"
atom_config_db_username: "root"
atom_config_db_password: "root"
atom_config_db_hostname: "localhost"
atom_config_db_port: "3306"
atom_config_db_name: "atom"
atom_config_db_encoding: "utf8"

#
# propel.ini
#

atom_template_propel_ini: "atom/config/propel.ini"

#
# app.yml
#

atom_template_app_yml: "atom/apps/qubit/config/app.yml"
atom_app_upload_limit: "-1"
atom_app_cache_engine: "sfMemcacheCache"
atom_app_cache_engine_options:
  storeCacheInfo: "yes"
  prefix: "atom"
  host: "127.0.0.1"
  port: "11211"
  persistent: "yes"

#
# factories.yml
#

atom_template_factories_yml: "atom/apps/qubit/config/factories.yml"
atom_factory_user: "myUser" # e.g. adLdapUser
atom_factory_user_timeout: "1800"

#
# settings.yml
#

atom_template_settings_yml: "atom/apps/qubit/config/settings.yml"
atom_default_culture: "en"
atom_default_timezone: "America/Vancouver"

atom_app_read_only: false
# atom_app_google_maps_api_key:
# atom_app_google_analytics_api_key:

#
# gearman.yml
#

atom_template_gearman_yml: "atom/apps/qubit/config/gearman.yml"
atom_app_gearman_job_server: "127.0.0.1:4730"

#
# search.yml
#

# Search config file version:
#   Atom 2.1, Binder 0.8: "2.1"
#   Atom 2.4: "2.4"
#   Atom 2.5, Binder 0.9: "2.5"
atom_es_config_version: "2.4"
atom_template_search_yml: "atom/apps/qubit/config/{{ atom_es_config_version }}-search.yml"

atom_es_host: "127.0.0.1"
atom_es_port: "9200"
atom_es_index: "atom"
# Search batch size, recommended values:
#   AtoM: "500"
#   Binder: "100"
atom_es_batch_size: "500"
# Fields limit (new in AtoM 2.5, Binder 0.9), recommended values:
#   AtoM: "3000"
#   Binder: "6000"
atom_es_fields_limit: "3000"

#
# php5-fpm pool
#

atom_pool_user: "{{ atom_user }}"
atom_pool_group: "{{ atom_group }}"
atom_pool_listen: "/var/run/php-fpm.atom.sock"
atom_pool_listen_allowed_clients: ""
atom_pool_listen_owner: www-data  # Nginx will use this if it's installed in the same machine
atom_pool_listen_group: www-data  # Nginx will use this if it's installed in the same machine
atom_pool_listen_mode: "0600"
atom_pool_pm: "dynamic"
atom_pool_pm_max_children: "30"
atom_pool_pm_start_servers: "10"
atom_pool_pm_min_spare_servers: "10"
atom_pool_pm_max_spare_servers: "10"
atom_pool_pm_max_requests: "200"
atom_pool_php_memory_limit: "512M"
atom_pool_php_max_execution_time: "120"
atom_pool_php_post_max_size: "72M"
atom_pool_php_upload_max_filesize: "64M"
atom_pool_php_envs:
  ATOM_DEBUG_IP: "127.0.0.1"
  ATOM_READ_ONLY: "off"
## For Binder(DRMC), there are some other env vars required. Example:
## (re-define atom_pool_php_envs in the playbook or in host_vars)
## atom_pool_php_envs:
##   ATOM_DEBUG_IP: "127.0.0.1"
##   ATOM_READ_ONLY: "off"
##   ARCHIVEMATICA_SS_HOST: "192.168.1.2"
##   ARCHIVEMATICA_SS_PORT: "8000"
##   ARCHIVEMATICA_SS_PIPELINE_UUID: "862048df-2923-4256-9f3b-5a757e66a6ca"
##   ARCHIVEMATICA_SS_USER: "ssuser"
##   ARCHIVEMATICA_SS_API_KEY: "{{ vault_archivematica_ss_api_key }}"
##   ATOM_DRMC_LDAP_ADMIN_USERNAME: "foo"
##   ATOM_DRMC_LDAP_ADMIN_PASSWORD: "{{ vault_atom_drmc_ldap_admin_password }}"
##   ATOM_DRMC_TMS_URL: "http://yourserver.org/TMSAPI/TmsObjectSvc/TmsObjects.svc"

#
# DRMC
#

atom_drmc: "no"
atom_drmc_path: "{{ atom_path }}/plugins/arDrmcPlugin/frontend"
# Install Mock API
atom_drmc_mock: "no"
# Copy ES plugins to /etc/elasticsearch
#   Binder 0.8: "yes" (assumes ES running on same server)
#   Binder 0.9: "no"
atom_drmc_es_scripts: "no"
