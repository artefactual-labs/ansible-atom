---

- include: "deps.yml"
  tags:
    - "deps"

- include: "php.yml"
  tags:
    - "php"

- include: "basic.yml"
  tags:
    - "basic"

- include: "flush.yml"
  become_user: "{{ atom_user }}"
  when: "atom_flush_data is defined and atom_flush_data|bool"
  tags:
    - "flush"

- include: "plugins.yml"
  become_user: "{{ atom_user }}"
  tags:
    - "plugins"

- include: "search.yml"
  become_user: "{{ atom_user }}"
  when: "atom_populate_index is defined and atom_populate_index|bool"
  tags:
    - "search"

- include: "build.yml"
  become_user: "{{ atom_user }}"
  when: "atom_build_static_assets is defined and atom_build_static_assets|bool"
  tags:
    - "build"

- include: "worker.yml"
  when: "atom_worker_setup is defined and atom_worker_setup|bool"
  tags:
    - "worker"

- include: "devbox.yml"
  when: "atom_devbox|bool"
  tags:
    - "devbox"
